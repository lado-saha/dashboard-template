{"openapi":"3.0.1","info":{"title":"Media Service API","description":"Media Service API","license":{"name":"Unlicense","url":"https://unlicense.org/"},"version":"1.0.0"},"servers":[{"url":"https://gateway.yowyob.com/media-service"}],"security":[{"bearerAuth":[]},{"Public-Key":[]},{"oAuth":[]}],"paths":{"/media/{service}/{type}/{path}/{filename}":{"get":{"tags":["download-controller"],"operationId":"getObject","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}},{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DataBuffer"}}}}}}},"put":{"tags":["upload-controller"],"operationId":"updateFile","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}},{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","format":"binary"},"request":{"$ref":"#/components/schemas/UploadRequest"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UploadMediaResponse"}}}}}},"delete":{"tags":["delete-controller"],"operationId":"getObject_1","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}},{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/media/{service}/{type}/{path}/{resource_id}":{"post":{"tags":["upload-controller"],"operationId":"uploadFile","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}},{"name":"resource_id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","format":"binary"},"request":{"$ref":"#/components/schemas/UploadRequest"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UploadMediaResponse"}}}}}}},"/media/{service}/{type}/{path}":{"post":{"tags":["upload-controller"],"operationId":"uploadFileWithoutResourceId","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","format":"binary"},"request":{"$ref":"#/components/schemas/UploadRequest"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UploadMediaResponse"}}}}}}},"/media/infos/{service}/{type}/{path}/{resource_id}":{"get":{"tags":["media-controller"],"operationId":"getAllMedia","parameters":[{"name":"service","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ServiceType"}},{"name":"type","in":"path","required":true,"schema":{"$ref":"#/components/schemas/MediaType"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}},{"name":"resource_id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MediaDto"}}}}}}}}},"components":{"schemas":{"ServiceType":{"type":"string","enum":["auth","business-actor","product","resource","organization","snappy","review","point-of-interest","location","unknown"]},"MediaType":{"type":"string","enum":["pdf","file","audio","video","image","unknown"]},"UploadRequest":{"type":"object","properties":{"is_primary":{"type":"boolean"},"description":{"type":"string"}}},"UploadMediaResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"resourceId":{"type":"string","format":"uuid"},"uri":{"type":"string"},"url":{"type":"string"}}},"DataBuffer":{"type":"object"},"MediaDto":{"type":"object","properties":{"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"deleted_at":{"type":"string","format":"date-time"},"created_by":{"type":"string","format":"uuid"},"updated_by":{"type":"string","format":"uuid"},"name":{"type":"string"},"real_name":{"type":"string"},"size":{"type":"integer","format":"int64"},"mime":{"type":"string"},"extension":{"type":"string"},"is_primary":{"type":"boolean"},"type":{"$ref":"#/components/schemas/MediaType"},"description":{"type":"string"},"location":{"type":"string"},"headers":{"type":"object","additionalProperties":{"type":"string"}},"id":{"type":"string","format":"uuid"},"resource_id":{"type":"string","format":"uuid"},"service":{"$ref":"#/components/schemas/ServiceType"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer"},"Public-Key":{"type":"apiKey","name":"Public-Key","in":"header","scheme":"Public-Key"},"oAuth":{"type":"oauth2","flows":{"clientCredentials":{"authorizationUrl":"https://gateway.yowyob.com/auth-service/oauth/authorize","tokenUrl":"https://gateway.yowyob.com/auth-service/oauth/token","scopes":{"read":"Read access","write":"Write access"}}}}}}}